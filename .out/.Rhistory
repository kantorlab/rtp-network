head(individuals_dt)
nrow(individuals_dt)
length(unique(individuals_dt$StudyID))
table(substr(individuals_dt$StudyID, 1, 1))
table(individuals_dt$Source, exclude = NULL)
table(individuals_dt$Source, exclude = NULL)/sum(table(individuals_dt$Source, exclude = NULL))
length(unique(individuals_dt$ClusteredHIVTrace005))
length(unique(individuals_dt$ClusteredHIVTrace015))
length(unique(individuals_dt$ClusteredPhyloAny))
individuals_in_net_dt_studyidfrom <-
which(individuals_dt$StudyID %in% net_dt$StudyIDFrom)
length(individuals_in_net_dt_studyidfrom)
individuals_in_net_dt_studyidto <- which(individuals_dt$StudyID %in% net_dt$StudyIDTo)
length(individuals_in_net_dt_studyidto)
individuals_in_net_dt_studyidfrom_or_to <-
which(individuals_dt$StudyID %in% c(net_dt$StudyIDFrom, net_dt$StudyIDTo))
length(individuals_in_net_dt_studyidfrom_or_to)
individuals_in_net_dt_studyidto <- which(individuals_dt$StudyID %in% net_dt$StudyIDTo)
length(individuals_in_net_dt_studyidto)
individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo <-
which(individuals_dt$StudyID %in% net_dt_without_empty_StudyIDTo$StudyIDFrom)
length(individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo)
individuals_in_net_dt_studyidto_witout_empty_StudyIDTo <-
which(individuals_dt$StudyID %in% net_dt_without_empty_StudyIDTo$StudyIDTo)
length(individuals_in_net_dt_studyidto_witout_empty_StudyIDTo)
intersection_set_from_and_to <- sort(
intersect(
individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo,
individuals_in_net_dt_studyidto_witout_empty_StudyIDTo
))
length(intersection_set_from_and_to)
table(individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo]$ClusteredPhyloAny,
exclude = NULL)
sum(table(individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo]$ClusteredPhyloAny,
exclude = NULL))
table(individuals_dt[individuals_in_net_dt_studyidto_witout_empty_StudyIDTo]$ClusteredPhyloAny,
exclude = NULL)
sum(table(individuals_dt[individuals_in_net_dt_studyidto_witout_empty_StudyIDTo]$ClusteredPhyloAny,
exclude = NULL))
study_ids_ctdb <- unique(c(net_dt$StudyIDFrom, net_dt$StudyIDTo))
study_ids_gdb <- individuals_dt$StudyID
intersection <- length(intersect(study_ids_ctdb, study_ids_gdb))
union <- length(unique(c(study_ids_ctdb, study_ids_gdb)))
jaccard_similarity <- intersection / union
study_id_from_and_to_in_individuals_dt <-
sort(union(
individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo,
individuals_in_net_dt_studyidto_witout_empty_StudyIDTo
)
)
which(duplicated(study_id_from_and_to_in_individuals_dt) == TRUE)
length(study_id_from_and_to_in_individuals_dt)
identical(length(unique(study_id_from_and_to_in_individuals_dt)),
(length(individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo) +
length(individuals_in_net_dt_studyidto_witout_empty_StudyIDTo) -
length(intersection_set_from_and_to)
)
)
length(which(individuals_dt$StudyID %in% ind_in_partner_db == FALSE))
length(which(ind_in_partner_db %in% individuals_dt$StudyID == FALSE))
length(unique(individuals_dt$ClusteredHIVTrace005[study_id_from_and_to_in_individuals_dt]))
length(unique(individuals_dt$ClusteredHIVTrace015[study_id_from_and_to_in_individuals_dt]))
length(unique(individuals_dt$ClusteredPhyloAny[study_id_from_and_to_in_individuals_dt]))
#   individuals_dt[individuals_in_net_dt_studyidfrom, .(n_source=.N),
#                by=.(Source)
#                ][,
#                  "prop":=round(n_source/sum(n_source), 3)
#                  ][
#                  ]
#
#
#   individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo, .(n_source=.N),
#                by=.(Source)
#                ][,
#                  "prop":=round(n_source/sum(n_source), 3)
#                  ][
#                  ]
#
# individuals_dt[individuals_in_net_dt_studyidto, .(n_source=.N),
#                by=.(Source)
#                ][,
#                  "prop":=round(n_source/sum(n_source), 3)
#                  ][
#                  ]
# individuals_dt[individuals_in_net_dt_studyidfrom, .(.N),
#                by=.(DemoGender)
#                ][,
#                  "prop":=round(N/sum(N), 3)
#                  ][
#                  ]
#
# individuals_dt[individuals_in_net_dt_studyidfrom, .(.N),
#                by=.(DemoBirthSex)
#                ][,
#                  "prop":=round(N/sum(N), 3)
#                  ][
#                  ]
#
# individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo, .(.N),
#                by=.(DemoGender)
#                ][,
#                  "prop":=round(N/sum(N), 3)
#                  ][
#                  ]
#
# individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo, .(.N),
#                by=.(DemoBirthSex)
#                ][,
#                  "prop":=round(N/sum(N), 3)
#                  ][
#                  ]
#
#
# individuals_dt[individuals_in_net_dt_studyidto, .(.N),
#                by=.(DemoGender)
#                ][,
#                  "prop":=round(N/sum(N), 3)
#                  ][
#                  ]
#
# individuals_dt[individuals_in_net_dt_studyidto, .(.N),
#                by=.(DemoBirthSex)
#                ][,
#                  "prop":=round(N/sum(N), 3)
#                  ][
#                  ]
individuals_dt[individuals_in_net_dt_studyidfrom, .(.N),
by=.(DemoRace)
][,
"prop":=round(N/sum(N), 3)
][
]
individuals_dt[individuals_in_net_dt_studyidfrom, .(.N),
by=.(DemoHispanic)
][,
"prop":=round(N/sum(N), 3)
][
]
individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo, .(.N),
by=.(DemoRace)
][,
"prop":=round(N/sum(N), 3)
][]
individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo, .(.N),
by=.(DemoHispanic)
][,
"prop":=round(N/sum(N), 3)
][]
individuals_dt[individuals_in_net_dt_studyidto, .(.N),
by=.(DemoRace)
][,
"prop":=round(N/sum(N), 3)
][
]
individuals_dt[individuals_in_net_dt_studyidto, .(.N),
by=.(DemoHispanic)
][,
"prop":=round(N/sum(N), 3)
][
]
individuals_dt[individuals_in_net_dt_studyidfrom,
.(mean=mean(HIVDxAge, na.rm=T),
median=median(HIVDxAge, na.rm = T),
sd=sd(HIVDxAge, na.rm = T),
min=min(HIVDxAge, na.rm = TRUE),
max=max(HIVDxAge, na.rm=TRUE))
][
]
## discretized
breaks = c(0, 19, 25, 35, 45, 55, 100)
labels = c("<=18", "19-24", "25-34", "35-44", "45-54", ">=55")
individuals_dt[individuals_in_net_dt_studyidfrom,
hivdxage_cat :=
cut(HIVDxAge, breaks = breaks,
labels = labels)]
hivdxage_cat_dt <-
individuals_dt[individuals_in_net_dt_studyidfrom,
.(.N), by=hivdxage_cat][,
"prop":=round(N/sum(N), 3)
][order(hivdxage_cat)]
hivdxage_cat_dt
sum(hivdxage_cat_dt$N)
## Who are the people here who do not have a reported age for diagnosis?
na_hivdxage_cat_dt <- individuals_dt[intersect(individuals_in_net_dt_studyidfrom, which(is.na(individuals_dt$hivdxage_cat))),]
dim(na_hivdxage_cat_dt)
knitr::kable(na_hivdxage_cat_dt)
knitr::kable(individuals_dt[individuals_in_net_dt_studyidfrom, .SD, .SDcols=c("StudyID",
#"Source",
"HIVDxDate",
"HIVDxAge",
"hivdxage_cat")])
individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo,
.(mean=mean(HIVDxAge, na.rm=T),
median=median(HIVDxAge, na.rm = T),
sd=sd(HIVDxAge, na.rm = T),
min=min(HIVDxAge, na.rm = TRUE),
max=max(HIVDxAge, na.rm=TRUE))
][
]
## discretized
breaks = c(0, 19, 25, 35, 45, 55, 100)
labels = c("<=18", "19-24", "25-34", "35-44", "45-54", ">=55")
individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo,
hivdxage_cat :=
cut(HIVDxAge, breaks = breaks,
labels = labels)]
hivdxage_cat_dt <-
individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo,
.(.N), by=hivdxage_cat][,
"prop":=round(N/sum(N), 3)
][order(hivdxage_cat)]
hivdxage_cat_dt
sum(hivdxage_cat_dt$N)
## Who are the people here who do not have a reported age for diagnosis?
na_hivdxage_cat_dt <- individuals_dt[intersect(individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo, which(is.na(individuals_dt$hivdxage_cat))),]
dim(na_hivdxage_cat_dt)
knitr::kable(na_hivdxage_cat_dt)
knitr::kable(individuals_dt[individuals_in_net_dt_studyidfrom, .SD, .SDcols=c("StudyID",
#"Source",
"HIVDxDate",
"HIVDxAge",
"hivdxage_cat")])
individuals_dt[individuals_in_net_dt_studyidto,
.(mean=mean(HIVDxAge, na.rm=T),
median=median(HIVDxAge, na.rm = T),
sd=sd(HIVDxAge, na.rm = T),
min=min(HIVDxAge, na.rm = TRUE),
max=max(HIVDxAge, na.rm=TRUE))
][
]
## discretized
breaks = c(0, 19, 25, 35, 45, 55, 100)
labels = c("<=18", "19-24", "25-34", "35-44", "45-54", ">=55")
individuals_dt[individuals_in_net_dt_studyidto,
hivdxage_cat :=
cut(HIVDxAge, breaks = breaks,
labels = labels)]
hivdxage_cat_dt <-
individuals_dt[individuals_in_net_dt_studyidto,
.(.N), by=hivdxage_cat][,
"prop":=round(N/sum(N), 3)
][order(hivdxage_cat)]
hivdxage_cat_dt
sum(hivdxage_cat_dt$N)
## Who are the people here who do not have a reported age for diagnosis?
na_hivdxage_cat_dt <- individuals_dt[intersect(individuals_in_net_dt_studyidto, which(is.na(individuals_dt$hivdxage_cat))),]
dim(na_hivdxage_cat_dt)
knitr::kable(na_hivdxage_cat_dt)
knitr::kable(individuals_dt[individuals_in_net_dt_studyidto, .SD, .SDcols=c("StudyID",
#"Source",
"HIVDxDate",
"HIVDxAge",
"hivdxage_cat")])
#individuals_dt[individuals_in_net_dt_studyidfrom, lapply(.SD, function (x) length(x)), by=Source]
index_persons_dt <- individuals_dt[individuals_in_net_dt_studyidfrom,]
index_persons_dt[, hivdiagnosis_year := as.numeric(substr(HIVDxDate, 1, 4))]
table(index_persons_dt$hivdiagnosis_year)
breaks = c(0, 2000, 2006, 2011, 2021)
labels = c("<2000", "2001-2005", "2006-2010", "2011-2020")
index_persons_dt[, hivdiagnosis_year_group :=
cut(hivdiagnosis_year, breaks = breaks,
labels = labels)]
table(index_persons_dt$hivdiagnosis_year_group, exclude = NULL)
index_persons_dt[, .(.N), by=hivdiagnosis_year_group][,
"prop":=round(N/sum(N), 3)
][order(hivdiagnosis_year_group)]
index_persons_dt[which(is.na(hivdiagnosis_year)), .SD, .SDcols=c("StudyID",
#"Source",
"DemoGender",
"HIVDxDate",
"HIVDxAge",
"hivdiagnosis_year",
"hivdiagnosis_year_group")]
index_persons_ge1contact_dt <-
individuals_dt[individuals_in_net_dt_studyidfrom_wo_emptyStudyIDTo,]
index_persons_ge1contact_dt[, hivdiagnosis_year :=
as.numeric(substr(HIVDxDate, 1, 4))]
table(index_persons_ge1contact_dt$hivdiagnosis_year)
breaks = c(0, 2000, 2006, 2011, 2021)
labels = c("<2000", "2001-2005", "2006-2010", "2011-2020")
index_persons_ge1contact_dt[, hivdiagnosis_year_group :=
cut(hivdiagnosis_year, breaks = breaks,
labels = labels)]
table(index_persons_ge1contact_dt$hivdiagnosis_year_group, exclude = NULL)
index_persons_ge1contact_dt[, .(.N),
by=hivdiagnosis_year_group][,
"prop":=round(N/sum(N), 3)
][order(hivdiagnosis_year_group)]
partner_contacts_dt <- individuals_dt[individuals_in_net_dt_studyidto,]
partner_contacts_dt[, hivdiagnosis_year := as.numeric(substr(HIVDxDate, 1, 4))]
table(partner_contacts_dt$hivdiagnosis_year)
breaks = c(0, 2000, 2006, 2011, 2021)
labels = c("<2000", "2001-2005", "2006-2010", "2011-2020")
partner_contacts_dt[, hivdiagnosis_year_group :=
cut(hivdiagnosis_year, breaks = breaks,
labels = labels)]
table(partner_contacts_dt$hivdiagnosis_year_group, exclude = NULL)
partner_contacts_dt[, .(.N), by=hivdiagnosis_year_group][,
"prop":=round(N/sum(N), 3)
][order(hivdiagnosis_year_group)]
index_persons_dt[, .(.N), by=RiskMSM][,
"prop":=round(N/sum(N), 3)
][]
index_persons_dt[, .(.N), by=RiskIDU][,
"prop":=round(N/sum(N), 3)
][]
index_persons_dt[, .(.N), by=RiskHeterosexual][,
"prop":=round(N/sum(N), 3)
][]
index_persons_ge1contact_dt[, .(.N), by=RiskMSM][,
"prop":=round(N/sum(N), 3)
][]
index_persons_ge1contact_dt[, .(.N), by=RiskIDU][,
"prop":=round(N/sum(N), 3)
][]
index_persons_ge1contact_dt[, .(.N), by=RiskHeterosexual][,
"prop":=round(N/sum(N), 3)
][]
partner_contacts_dt[, .(.N), by=RiskMSM][,
"prop":=round(N/sum(N), 3)
][]
partner_contacts_dt[, .(.N), by=RiskIDU][,
"prop":=round(N/sum(N), 3)
][]
partner_contacts_dt[, .(.N), by=RiskHeterosexual][,
"prop":=round(N/sum(N), 3)
][]
#knitr::kable(net_dt)
no_missing_rows_in_net_dt <- net_dt[StudyIDTo != "", , ]
class(no_missing_rows_in_net_dt)
net_dt[, .N, by = StudyIDFrom] #full dataset
#net_dt[StudyIDFrom == "S20000441296", ]
no_missing_rows_in_net_dt[, .N, by = StudyIDFrom] #IPs with named partners only
#no_missing_rows_in_net_dt[StudyIDFrom == "S20000441296", ]
net_dt[, .(UniqueContacts = uniqueN(StudyIDTo)), by = StudyIDFrom]
unique_contacts_counts <- no_missing_rows_in_net_dt[, .(UniqueContacts = uniqueN(StudyIDTo)), by = StudyIDFrom]
sum(unique_contacts_counts$UniqueContacts)
summary(as.numeric(table(net_dt$StudyIDTo)[-1]))
summary(as.numeric(table(no_missing_rows_in_net_dt$StudyIDTo)))
individuals_in_net_dt_studyidfrom_nomiss <- which(individuals_dt$StudyID %in% no_missing_rows_in_net_dt$StudyIDFrom)
length(individuals_in_net_dt_studyidfrom_nomiss)
individuals_in_net_dt_studyidto_nomiss <- which(individuals_dt$StudyID %in% no_missing_rows_in_net_dt$StudyIDTo)
length(individuals_in_net_dt_studyidto_nomiss)
length(no_missing_rows_in_net_dt$StudyIDTo)
length(unique(no_missing_rows_in_net_dt$StudyIDTo))
pts_reported_by_IPs_with_named_pts <- no_missing_rows_in_net_dt[,.N,by=StudyIDFrom]
dim(pts_reported_by_IPs_with_named_pts)
summary(pts_reported_by_IPs_with_named_pts$N)
idxs <- which(pts_reported_by_IPs_with_named_pts$StudyIDFrom %in% individuals_dt$StudyID == TRUE)
IPs_reporting_partners_in_unified_dt <- pts_reported_by_IPs_with_named_pts$StudyIDFrom[idxs]
unique_named_pt_contacts_reported_by_IPs <- unique(no_missing_rows_in_net_dt$StudyIDTo)
which(unique_named_pt_contacts_reported_by_IPs %in% individuals_dt$StudyID)
named_contacts_in_unified_dataset <- unique_named_pt_contacts_reported_by_IPs[which(unique_named_pt_contacts_reported_by_IPs %in% individuals_dt$StudyID)]
named_contacts_rows_from_unified_dt <- individuals_dt[StudyID %in% named_contacts_in_unified_dataset,,]
named_contacts_rows_from_unified_dt$HIVDxDate
length(named_contacts_rows_from_unified_dt$HIVDxDate)
length(which(named_contacts_rows_from_unified_dt$HIVDxDate == ""))
table(individuals_dt[StudyID %in% named_contacts_in_unified_dataset,,]$HIVDxDate, exclude = NULL)
table(named_contacts_rows_from_unified_dt$Sequence, exclude = NULL)
individuals_dt_of_msm_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & RiskMSM == "True",,]
nrow(individuals_dt_of_msm_who_named_partners)
net_dt_of_msm_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_msm_who_named_partners$StudyID,,]
pt_counts_msm_who_named_partners <- net_dt_of_msm_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_msm_who_named_partners)
pt_counts_msm_who_named_partners[,sum(N)]
pt_counts_msm_who_named_partners[,summary(N)]
idx <- which(net_dt_of_msm_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
msm_reported_partners_in_individuals_dt <- net_dt_of_msm_who_named_partners$StudyIDTo[idx]
unique(msm_reported_partners_in_individuals_dt)
msm_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% msm_reported_partners_in_individuals_dt,,]
table(msm_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(msm_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_hrh_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & RiskIDU == "True",,]
nrow(individuals_dt_of_hrh_who_named_partners)
net_dt_of_hrh_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_hrh_who_named_partners$StudyID,,]
pt_counts_hrh_who_named_partners <- net_dt_of_hrh_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_hrh_who_named_partners)
pt_counts_hrh_who_named_partners[,sum(N)]
pt_counts_hrh_who_named_partners[,summary(N)]
idx <- which(net_dt_of_hrh_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
idu_reported_partners_in_individuals_dt <- net_dt_of_hrh_who_named_partners$StudyIDTo[idx]
idu_reported_partners_in_individuals_dt
unique(idu_reported_partners_in_individuals_dt)
length(unique(idu_reported_partners_in_individuals_dt))
idu_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% idu_reported_partners_in_individuals_dt,,]
table(idu_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(idu_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_hrh_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & RiskHeterosexual == "True",,]
nrow(individuals_dt_of_hrh_who_named_partners)
net_dt_of_hrh_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_hrh_who_named_partners$StudyID,,]
pt_counts_hrh_who_named_partners <- net_dt_of_hrh_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_hrh_who_named_partners)
pt_counts_hrh_who_named_partners[,sum(N)]
pt_counts_hrh_who_named_partners[,summary(N)]
idx <- which(net_dt_of_hrh_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
hrh_reported_partners_in_individuals_dt <- net_dt_of_hrh_who_named_partners$StudyIDTo[idx]
hrh_reported_partners_in_individuals_dt
unique(hrh_reported_partners_in_individuals_dt)
length(unique(hrh_reported_partners_in_individuals_dt))
hrh_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% hrh_reported_partners_in_individuals_dt,,]
table(hrh_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(hrh_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(hrh_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_black_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & DemoRace == "Black",,]
nrow(individuals_dt_of_black_who_named_partners)
net_dt_of_black_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_black_who_named_partners$StudyID,,]
pt_counts_black_who_named_partners <- net_dt_of_black_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_black_who_named_partners)
pt_counts_black_who_named_partners[,sum(N)]
pt_counts_black_who_named_partners[,summary(N)]
idx <- which(net_dt_of_black_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
black_reported_partners_in_individuals_dt <- net_dt_of_black_who_named_partners$StudyIDTo[idx]
black_reported_partners_in_individuals_dt
unique(black_reported_partners_in_individuals_dt)
length(unique(black_reported_partners_in_individuals_dt))
black_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% black_reported_partners_in_individuals_dt,,]
table(black_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(black_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(black_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_white_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & DemoRace == "White",,]
nrow(individuals_dt_of_white_who_named_partners)
net_dt_of_white_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_white_who_named_partners$StudyID,,]
pt_counts_white_who_named_partners <- net_dt_of_white_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_white_who_named_partners)
pt_counts_white_who_named_partners[,sum(N)]
pt_counts_white_who_named_partners[,summary(N)]
idx <- which(net_dt_of_white_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
white_reported_partners_in_individuals_dt <- net_dt_of_white_who_named_partners$StudyIDTo[idx]
white_reported_partners_in_individuals_dt
unique(white_reported_partners_in_individuals_dt)
length(unique(white_reported_partners_in_individuals_dt))
white_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% white_reported_partners_in_individuals_dt,,]
table(white_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(white_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(white_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_asian_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & DemoRace == "Asian",,]
nrow(individuals_dt_of_asian_who_named_partners)
net_dt_of_asian_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_asian_who_named_partners$StudyID,,]
pt_counts_asian_who_named_partners <- net_dt_of_asian_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_asian_who_named_partners)
pt_counts_asian_who_named_partners[,sum(N)]
pt_counts_asian_who_named_partners[,summary(N)]
idx <- which(net_dt_of_asian_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
asian_reported_partners_in_individuals_dt <- net_dt_of_asian_who_named_partners$StudyIDTo[idx]
asian_reported_partners_in_individuals_dt
unique(asian_reported_partners_in_individuals_dt)
length(unique(asian_reported_partners_in_individuals_dt))
asian_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% asian_reported_partners_in_individuals_dt,,]
table(asian_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(asian_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(asian_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_other_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & DemoRace == "Other",,]
nrow(individuals_dt_of_other_who_named_partners)
net_dt_of_other_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_other_who_named_partners$StudyID,,]
pt_counts_other_who_named_partners <- net_dt_of_other_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_other_who_named_partners)
pt_counts_other_who_named_partners[,sum(N)]
pt_counts_other_who_named_partners[,summary(N)]
idx <- which(net_dt_of_other_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
other_reported_partners_in_individuals_dt <- net_dt_of_other_who_named_partners$StudyIDTo[idx]
other_reported_partners_in_individuals_dt
unique(other_reported_partners_in_individuals_dt)
length(unique(other_reported_partners_in_individuals_dt))
other_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% other_reported_partners_in_individuals_dt,,]
table(other_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(other_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(other_partners_in_individuals_full_dt$Sequence, exclude = NULL)
individuals_dt_of_nonhispanic_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & DemoHispanic == "True",,]
nrow(individuals_dt_of_nonhispanic_who_named_partners)
net_dt_of_nonhispanic_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_nonhispanic_who_named_partners$StudyID,,]
pt_counts_nonhispanic_who_named_partners <- net_dt_of_nonhispanic_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_nonhispanic_who_named_partners)
pt_counts_nonhispanic_who_named_partners[,sum(N)]
pt_counts_nonhispanic_who_named_partners[,summary(N)]
individuals_dt_of_nonnonhispanic_who_named_partners <-
individuals_dt[StudyID %in% IPs_reporting_partners_in_unified_dt & DemoHispanic == "False",,]
nrow(individuals_dt_of_nonnonhispanic_who_named_partners)
net_dt_of_nonhispanic_who_named_partners <- net_dt[StudyIDFrom %in% individuals_dt_of_nonhispanic_who_named_partners$StudyID,,]
pt_counts_nonhispanic_who_named_partners <- net_dt_of_nonhispanic_who_named_partners[,.(N=.N),by=StudyIDFrom]
nrow(pt_counts_nonhispanic_who_named_partners)
pt_counts_nonhispanic_who_named_partners[,sum(N)]
pt_counts_nonhispanic_who_named_partners[,summary(N)]
idx <- which(net_dt_of_nonhispanic_who_named_partners$StudyIDTo %in% individuals_dt$StudyID)
idx
nonhispanic_reported_partners_in_individuals_dt <- net_dt_of_nonhispanic_who_named_partners$StudyIDTo[idx]
nonhispanic_reported_partners_in_individuals_dt
unique(nonhispanic_reported_partners_in_individuals_dt)
length(unique(nonhispanic_reported_partners_in_individuals_dt))
nonhispanic_partners_in_individuals_full_dt <- individuals_dt[StudyID %in% nonhispanic_reported_partners_in_individuals_dt,,]
table(nonhispanic_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(nonhispanic_partners_in_individuals_full_dt$HIVDxDate, exclude = NULL)
table(nonhispanic_partners_in_individuals_full_dt$Sequence, exclude = NULL)
table(individuals_dt[individuals_in_net_dt_studyidto_witout_empty_StudyIDTo]$ClusteredPhyloAny,
exclude = NULL)
sum(table(individuals_dt[individuals_in_net_dt_studyidto_witout_empty_StudyIDTo]$ClusteredPhyloAny,
exclude = NULL))
sum(table(individuals_dt[individuals_in_net_dt_studyidto_witout_empty_StudyIDTo]$ClusteredPhyloAny, exclude = NULL))
.libPaths()
